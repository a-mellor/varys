<header>
  <h1><a href="/">varys</a></h1><%=erb :'partials/_search_box' %>
</header>

<div id='stats'>
  <%= @results.length %>
  <%= pluralise('result', @results.length) %>
  in <%= Time.now - @now %> seconds
</div>

<% if @results.length > 0 %>
  <div id='results'>
    <% @results.each do |result| %>
      <%= erb :'partials/_result', locals: { result: result } %>
    <% end %>

    <div id="pages">
      <% get_pages_wrapper(@query, @start).each do |i| %>
        <div class="page"><a href="/results?q=<%= @query %>&start=<%= get_start_number(i) %>"><%= i %></a></div>
      <% end %>
    </div>
  </div>
<% end %>

<div id='widgets'>

</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script>
  $.get('/widgets?q=<%= @query %>', function(data) {
    $('#widgets').html(data)
  })
</script>
